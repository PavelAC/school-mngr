<div class="add-course-container">
    <h2>Create New Course</h2>
    
    <div *ngIf="!(isAdmin$ | async)" class="unauthorized">
      <p>Access Denied: You must be an administrator to create courses.</p>
    </div>
    
    <form 
      *ngIf="isAdmin$ | async"
      [formGroup]="courseForm" 
      (ngSubmit)="onSubmit()"
      class="course-form"
    >
      <div class="form-group">
        <label for="title">Course Title</label>
        <input 
          type="text" 
          id="title" 
          formControlName="title" 
          placeholder="Enter course title"
        >
        <div 
          *ngIf="courseForm.get('title')?.invalid && courseForm.get('title')?.touched" 
          class="error-message"
        >
          Title is required and must be at least 3 characters long
        </div>
      </div>
      
      <div class="form-group">
        <label for="description">Course Description</label>
        <textarea 
          id="description" 
          formControlName="description" 
          placeholder="Provide a detailed course description"
        ></textarea>
        <div 
          *ngIf="courseForm.get('description')?.invalid && courseForm.get('description')?.touched" 
          class="error-message"
        >
          Description is required and must be at least 10 characters long
        </div>
      </div>
      
      <div class="form-group">
        <label for="enrollmentCode">Enrollment Code (Optional)</label>
        <input 
          type="text" 
          id="enrollmentCode" 
          formControlName="enrollmentCode" 
          placeholder="Create an optional enrollment code"
        >
      </div>

      <app-user-list 
    [roleFilter]="'teacher'" 
    (userSelected)="onTeacherSelected($event)">
  </app-user-list>
      
      <button 
        type="submit" 
        [disabled]="courseForm.invalid || isSubmitting"
      >
        {{ isSubmitting ? 'Creating...' : 'Create Course' }}
      </button>
    </form>
    
    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>
  </div>